---
// Component Script (JavaScript/TypeScript runs at build time)
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import ProjectCard from '../components/ProjectCard.astro'; // Ensure this path is correct
import ProjectModal from '../components/ProjectModal.astro';
const myName = "Naga Nitish Chamala"; // Replace with your name

/ Fetch all portfolio entries and sort them by publishDate descending (newest first)
const allProjects = (await getCollection('portfolio')).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf()
);

// You can also filter, e.g., to show only featured projects:
// const featuredProjects = allProjects.filter(project => project.data.featured);
---
<BaseLayout title="Welcome">
    <div class="intro-section">
        <div class="intro-text">
            <h1>Hello, I'm {myName}!</h1>
            <p>Highly motivated researcher with expertise in CFD, multiphase flows, and thermal analysis, demonstrated through advanced numerical simulations, model development, and experimental validation. Proficient in industry-standard software (Fluent/CFX/Icepak, OpenFOAM, StarCCM+) and programming languages (C++, Python). Proven ability to optimize designs and improve performance in complex fluid and thermal systems.</p>
        </div>
        <div class="intro-image-container">
            <img 
                src="/images/naga_photo.jpg"
                alt="A picture of {myName}" 
                class="profile-picture" 
            />
        </div>
    </div>
    <div class="button-container">
      <a 
        href="https://www.linkedin.com/in/naga-nitish-chamala-0b0b31103/" 
        target="_blank" 
        rel="noopener noreferrer" 
        class="button"
      >
        LinkedIn
      </a>
      <a 
        href="/resume.pdf" 
        target="_blank" 
        rel="noopener noreferrer" 
        class="button"
      >
        Resume
      </a>

<section class="portfolio-hero">
    <h1>Portfolio Showcase</h1>
    <p>Welcome to my portfolio. Here you'll find a selection of projects that I've worked on. Each project reflects my interests and the quality of work. Feel free to explore and get in touch!</p>
  </section>
<section class="portfolio-grid-section">
    {allProjects.length > 0 ? (
      <div class="project-grid">
        {allProjects.map(project => (
          <ProjectCard 
            slug={project.slug}
            title={project.data.title}
            description={project.data.description}
            coverImage={project.data.coverImage}
            tags={project.data.tags}
            liveLink={project.data.liveLink}
            repoLink={project.data.repoLink}
            videoLink={project.data.videoLink}
            publishDate={project.data.publishDate}
          />
        ))}
      </div>
    ) : (
      <p class="no-projects">Looks like I need to add some projects here soon! Stay tuned.</p>
    )}
  </section>

    {/* Add other sections of your homepage here */}

    <style>
        /* Scoped styles for this page */
        .intro-section {
            display: flex; /* Example: for side-by-side layout */
            align-items: center;
            gap: 2rem; /* Space between text and image */
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            margin-bottom: 2rem;
        }

        .intro-text {
            flex: 2; /* Text takes more space */
            min-width: 250px; /* Ensure text has some minimum width */
        }

        .intro-image-container {
            flex: 1; /* Image container takes less space */
            display: flex;
            justify-content: center; /* Center image if container is wider */
            min-width: 200px;
        }

        .profile-picture {
            width: 200px; /* Adjust size as needed */
            height: 200px; /* Adjust size as needed */
            object-fit: cover; /* Ensures the image covers the area without distortion */
            border-radius: 50%; /* Makes the image circular */
            border: 3px solid #fff; /* Optional: adds a white border */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: adds a subtle shadow */
            
            /* Animation properties */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; 
            /* Smooth transition for transform and shadow */
        }

        .profile-picture:hover {
            transform: scale(1.1); /* Makes the image 10% larger */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* Enhance shadow on hover */
        }
    .portfolio-hero {
      text-align: center;
      margin-bottom: 3rem; /* More space after hero */
    }
    .portfolio-hero h1 {
      font-size: 2.75rem; /* Larger hero title */
      margin-bottom: 0.5em;
      color: var(--text-color);
    }
    .portfolio-hero p {
      font-size: 1.125rem; /* Slightly larger intro text */
      color: var(--secondary-text-color); /* Use secondary text for less emphasis */
      max-width: 700px; /* Constrain line length */
      margin-left: auto;
      margin-right: auto;
    }

    .project-grid {
      display: grid;
      /* grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); */
      grid-template-columns: repeat(auto-fill, minmax(min(100%, 350px), 1fr)); /* Responsive columns */
      gap: 2rem; /* Increased gap */
    }

    .no-projects {
      text-align: center;
      font-style: italic;
      color: var(--secondary-text-color);
      padding: 2rem;
    }
    </style>
    <ProjectModal />
</BaseLayout>
